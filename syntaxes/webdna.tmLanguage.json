{
	"scopeName": "source.webdna",
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "WebDNA",
	"patterns": [
		{ "include": "#comments" },
		{ "include": "#functions" },
		{ "include": "#contexts" },
		{ "include": "#keywords" },
		{ "include": "#strings" },
		{ "include": "#tags" }
	],
	"repository": {
		"keywords": {
			"patterns": [{
					"name": "variable.language.webdna",
					"match": "\\[\\/?\\b(?i)(text|math)\\b.*?\\]"
				}
			]
		},
		"contexts": {
			"patterns":[{
				"name": "variable.language.webdna",
				"match": "\\[\\/?\\b(?i)(founditems|return|url)\\b\\]"
			}]
		},
		"tags": {
			"patterns": [{
				"name": "variable.webdna",
				"match": "\\[([^\\[\\]]*)\\]"
			}]
		},
		"functions":{
			"patterns": [{
				"name": "support.function.webdna",
				"match": "\\[\\b(?i)(browsername|cart|command|elapsedtime|flushdatabases|flushcache|freememory|httpmethod|ipaddress|issecureclient|lastautonumber|lastrandom|password|platform|product|referrer|referer|thisfile|thisurl|thisurlplusget|username|version)\\b\\]"
			},{
				"name": "support.function.webdna",
				"match": "\\[\\b(?i)(date|random|time)\\b.*?\\]"
			}]
		},
		"strings": {
			"patterns": [{
				"name": "string.quoted.double.webdna",
				"begin": "\"",
				"end": "\"",
				"patterns": [{
					"name": "constant.character.escape.webdna",
					"match": "\\\\."
				}]
			},{
				"patterns": [{
					"name": "string.quoted.single.webdna",
					"match": "'.*?'"
				}]
			}]
		},
		"comments":{
			"patterns": [{
				"name": "comment.block.webdna",
				"begin": "\\[!\\]",
				"end": "\\[\/!\\]",
				"patterns": []
			}]
		}
	}
}