{
	"scopeName": "source.webdna",
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "WebDNA",
	"patterns": [
		{
			"include": "#webdna"
		},
		{
			"include": "text.html.derivative"
		}
	],
	"repository": {
		"webdna": {
			"patterns": [
				{ "include": "#comments" },
				{ "include": "#keywords" },
				{ "include": "#storage" },
				{ "include": "#support" },
				{ "include": "#sql" },
				{ "include": "#contexts-valid" },
				{ "include": "#tags-valid" },
				{ "include": "#strings" }
			]
		},

		"parameters": {
			"patterns": [
				{
					"begin": "(?i)([\\s|&])(multi|s(cope|how))(?![\\w:-])",
					"beginCaptures": {
					  "1": {
						"name": "variable.parameter.and.webdna"
					  },
					  "2": {
						"name": "entity.other.parameter-name.webdna"
					  }
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				}
			]
		},

		"comments": {
			"begin": "\\[!\\]",
			"captures": {
				"0": {
					"name": "punctuation.definition.comment.webdna"
				}
			},
			"end": "\\[\/!\\]",
			"name": "comment.block.webdna",
			"patterns": [
				{ "include": "#comments" }
			]
		},

		"contexts-valid": {
			"patterns": [{
				"begin": "(?i)(\\[)\\b(applescript|capitalize|countchars|ddesend|dos|input|interpret|listdatabases|lineitems|raw|shell|spawn|unurl|url)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "entity.name.tag.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[\/)\\b(applescript|capitalize|countchars|ddesend|dos|input|interpret|listdatabases|lineitems|raw|shell|spawn|unurl|url)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "entity.name.tag.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},

		"keywords": {
			"patterns": [
				{ "include": "#keywords-valid" },
				{ "include": "#keywords-depreciated" }
			]
		},
		"keywords-conditional": {
			"patterns": [
				{ "include": "#keywords-conditional-depreciated" },
				{ "include": "#keywords-conditional-valid" }
			]
		},
		"keywords-conditional-depreciated": {
			"patterns": []
		},
		"keywords-conditional-valid": {
			"patterns": [{
				"begin": "(?i)(\\[)\\b(case|switch)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.conditional.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(value)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA case/switch parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				},{
					"include": "#webdna"
				}]
			},{
				"begin": "(?i)(\\[)\\b(hideif|if|showif)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.conditional.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{ "include": "#webdna" }]
			},{
				"begin": "(?i)(\\[)(default|else|then)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.conditional.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[\/)\\b(case|default|else|hideif|if|then|showif|switch)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.conditional.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},
		"keywords-depreciated": {
			"patterns": [
				{ "include": "#keywords-conditional-depreciated" },
				{ "include": "#keywords-flow-depreciated" }
			]
		},
		"keywords-flow": {
			"patterns": [
				{ "include": "#keywords-flow-depreciated" },
				{ "include": "#keywords-flow-valid" }
			]
		},
		"keywords-flow-depreciated": {
			"patterns": [{
				"begin": "(?i)(\\[)(html1|html2|html3)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "invalid.deprecated.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[\/)(html1|html2|html3)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "invalid.deprecated.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},
		"keywords-flow-valid": {
			"patterns": [{
				"begin": "(?i)(\\[)(return)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.flow.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[\/)(return)(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.flow.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[)(redirect)(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "keyword.control.flow.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s])(url)(?![\\w:-])",
					"beginCaptures": {
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				}]
			}]
		},
		"keywords-valid": {
			"patterns": [
				{ "include": "#keywords-conditional-valid" },
				{ "include": "#keywords-flow-valid" }
			]
		},

		

		"storage": {
			"patterns": [{
				"begin": "(?i)(\\[)\\b(function)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(name|preparse|scope)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				}]
			},{
				"begin": "(?i)(\\[\/)\\b(function)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.variable.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[)\\b(text)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.variable.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(multi|s(ecure|cope|how))(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
					  	"2": {
							"name": "variable.parameter.webdna"
					  	}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(math)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.variable.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(s(ecure|cope|how))(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
					  	"2": {
							"name": "variable.parameter.webdna"
					  	}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#parameter-interior" }
					]
				},{
					"begin": "(?i)([\\s|&])(date|time)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
					  	"2": {
							"name": "variable.parameter.webdna"
					  	}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
					  { "include": "#webdna" }
					]
				}]
			},{
				"begin": "(?i)(\\[\/)\\b(text|math)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "storage.type.variable.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},

		"strings": {
			"patterns": [{
				"name": "string.quoted.double.webdna",
				"begin": "\"",
				"end": "\"",
				"patterns": [{
					"name": "constant.character.escape.webdna",
					"match": "\\\\."
				}]
			},{
				"patterns": [{
					"name": "string.quoted.single.webdna",
					"match": "'.*?'"
				}]
			}]
		},

		"support": {
			"patterns": [
				{ "include": "#support-function" }
			]
		},
		"support-function": {
			"patterns": [
				{
					"include": "#support-function-depreciated"
				},
				{
					"include": "#support-function-valid"
				}
			]
		},
		"support-function-depreciated": {
			"patterns": []
		},
		"support-function-valid": {
			"patterns": [{
				"begin": "(?i)(\\[)\\b(browsername|cart|command|elapsedtime|flushdatabases|flushcache|freememory|httpmethod|ipaddress|issecureclient|lastautonumber|lastrandom|password|platform|product|referrer|referer|thisfile|thisurl|thisurlplusget|username|version)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			},{
				"begin": "(?i)(\\[)\\b(authenticate)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(realm)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						  { "include": "#parameter-interior" }
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(calcfilecrc32|deletefile)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(file)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				}]
			},{
				"begin": "(?i)(\\[)\\b(createfolder|deletefolder)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(path)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(copyfile|copyfolder|movefile|renamefile)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(to|from)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(closedatabase|commitdatabase)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(db)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(clearlineitems|purchase)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(cart|file)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(date|random|time)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(format)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(getcookie|getmimeheader)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(name)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(setmimeheader)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(name|value)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(setcookie)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(domain|expires|name|path|value)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(removelineitem)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(cart|file|index)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(protect)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(groups)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(validcard)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(accountNum|card)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [
						{
							"include": "#parameter-interior"
						}
					]
				}]
			},{
				"begin": "(?i)(\\[)\\b(findstring)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(source|find|matchcase|reverse|startat)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				}]
			},{
				"begin": "(?i)(\\[)\\b(filecompare)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "(?i)([\\s|&])(method|file1|file2|file1crc)(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				}]
			}]
		},

		"parameter-interior": {
			"patterns": [{
				"begin": "=",
				"beginCaptures": {
					"0": {
						"name": "punctuation.separator.key-value.webdna"
					}
				},
				"end": "(?<=[^\\s=])(?=&|\\])",
				"patterns": [
					{ "include": "#webdna" }
				]
			}]
		},

		"sql": {
			"patterns": [
				{
					"include": "#sql-depreciated"
				},
				{
					"include": "#sql-valid"
				}
			]
		},
		"sql-depreciated": {
			"patterns": [{
				"comment": "WebDNA SQLConnect Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sqlconnect)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sqlconnect))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlconnect.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sqlconnect))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlconnect.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(d(atabase|btype)|p(ort|wd)|host|uid|conn_var|var))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sqlconnect.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlconnect.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sqlconnect))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlconnect.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sqlconnect))",
								"patterns": [{
									"comment": "WebDNA SQLConnect Internal Tags",
									"begin": "(\\[)(?i:(sql_(host|server(type|ver)|clientver|dbname)))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.sqlconnect.webdna"
										}
									},
									"name": "meta.variable.sqlconnect.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA SQLInfo Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sqlinfo)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sqlinfo))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlinfo.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sqlinfo))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlinfo.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(conn_ref|ref))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sqlinfo.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlinfo.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sqlinfo))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlinfo.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sqlinfo))",
								"patterns": [{
									"comment": "WebDNA SQLInfo Internal Tags",
									"begin": "(\\[)(?i:(sql_(host|server(type|ver)|clientver|dbname)))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.sqlinfo.webdna"
										}
									},
									"name": "meta.variable.sqlinfo.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA SQLResult Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sqlresult)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sqlresult))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlresult.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sqlresult))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlresult.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(result_ref|ref))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sqlresult.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlresult.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sqlresult))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlresult.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sqlresult))",
								"patterns": [{
									"comment": "WebDNA SQLResult Internal Tags",
									"begin": "(\\[)(?i:(commandtext|num(found|fields|rowsaffected)|insertid))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "variable.language.sqlresult.webdna"
										}
									},
									"name": "meta.variable.sqlresult.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"comment": "WebDNA SQLResult Founditems",
									"begin": "(\\[/?)(?i:(founditems))(?=\\])",
									"beginCaptures": {
										"1": {
											"name": "punctuation.definition.tag.begin.webdna"
										},
										"2": {
											"name": "keyword.control.loop.sqlresult.webdna"
										}
									},
									"name": "meta.variable.sqlresult.$2.webdna",
									"end": "\\]",
									"endCaptures": {
										"0": {
											"name": "punctuation.definition.tag.end.webdna"
										}
									}
								},{
									"include": "#webdna"
								},
								{ 
									"include": "text.html.derivative" 
								}]
							}]
						}]
					}]
				}]
			},{
				"comment": "WebDNA SQLExecute Context",
				"begin": "(^[ \\t]+)?(?=\\[(?i:sqlexecute)\\b(?!-))",
				"beginCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.leading.webdna"
					}
				},
				"end": "(?!\\G)([ \\t]*$\\n?)?",
				"endCaptures": {
					"1": {
						"name": "punctuation.whitespace.embedded.trailing.webdna"
					}
				},
				"patterns": [{
					"begin": "(\\[)((?i:sqlexecute))\\b",
					"beginCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlexecute.start.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "(/)((?i:sqlexecute))(\\])",
					"endCaptures": {
						"0": {
							"name": "meta.tag.metadata.sqlexecute.end.webdna"
						},
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						},
						"3": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [{
						"begin": "\\G",
						"end": "(?=/)",
						"patterns": [{
							"begin": "(&?)(?i:(result_var|ref|conn_ref|var))(?![\\w:-])",
							"beginCaptures": {
								"1": {
									"name": "variable.parameter.and.webdna"
								},
								"2": {
									"name": "variable.parameter.webdna"
								}
							},
							"comment": "WebDNA parameters",
							"end": "(?=\\s*+[^=\\s])",
							"name": "meta.parameter.$2.webdna",
							"patterns": [
								{ "include": "#parameter-interior" }								
							]
						},{
							"begin": "(\\])",
							"name": "meta.embedded.context.sqlexecute.webdna",
							"beginCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlexecute.start.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.end.webdna"
								}
							},
							"end": "((\\[))(?=/(?i:sqlexecute))",
							"endCaptures": {
								"0": {
									"name": "meta.tag.metadata.sqlexecute.end.webdna"
								},
								"1": {
									"name": "punctuation.definition.tag.begin.webdna"
								}
							},
							"patterns": [{
								"begin": "\\G",
								"end": "(?=\\[/(?i:sqlexecute))",
								"patterns": [{
									"include": "#webdna"
								},
								{ 
									"include": "source.sql" 
								}]
							}]
						}]
					}]
				}]
			},{
				"begin": "(\\[)\\b(?i:(sqldisconnect))\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "([\\s|&])(?i:(conn_ref|ref))(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				}]
			},{
				"begin": "(\\[)\\b(?i:(sqlrelease))\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [{
					"begin": "([\\s|&])(?i:(result_ref|ref))(?![\\w:-])",
					"beginCaptures": {
						"1": {
							"name": "variable.parameter.and.webdna"
						},
						"2": {
							"name": "variable.parameter.webdna"
						}
					},
					"comment": "WebDNA parameters",
					"end": "(?=\\s*+[^=\\s])",
					"name": "meta.parameter.$2.webdna",
					"patterns": [{ "include": "#parameter-interior" }]
				}]
			}]
		},
		"sql-valid": {
			"patterns": [{
				"begin": "(?i)(\\[)\\b(sql)\\b(?=\\s|\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				},
				"patterns": [
					{
						"include": "#parameters"
					}
				]
			},{
				"begin": "(?i)(\\[\/)\\b(sql)\\b(?=\\])",
				"beginCaptures": {
					"1": {
						"name": "punctuation.definition.tag.begin.webdna"
					},
					"2": {
						"name": "support.function.webdna"
					}
				},
				"end": "\\]",
				"endCaptures": {
					"0": {
						"name": "punctuation.definition.tag.end.webdna"
					}
				}
			}]
		},

		"tags-valid": {
			"patterns": [
				{
					"begin": "(?i)(\\[)\\b(delete|include|lookup)\\b(?=\\s|\\])",
					"beginCaptures": {
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "support.function.webdna"
						}
					},
					"end": "\\]",
					"endCaptures": {
						"0": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					},
					"patterns": [
						{
							"include": "#parameters"
						}
					]
				},
				{
					"begin": "(?i)(\\[)([^ ]*?)(?=\\])",
					"beginCaptures": {
						"1": {
							"name": "punctuation.definition.tag.begin.webdna"
						},
						"2": {
							"name": "variable.webdna"
						}
					},
					"end": "\\]",
					"endCaptures": {
						"0": {
							"name": "punctuation.definition.tag.end.webdna"
						}
					}
				}
			]
		}
	}
}